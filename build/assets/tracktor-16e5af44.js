function p(){import.meta.url,import("_").catch(()=>1);async function*n(){}}const i={iframe:null,uuid:null,init:function(n,t){return new Promise(function(o,e){if(i.iframe&&i.uuid){o();return}if(!s(t)){e("Invalid UUID");return}l(n).then(function(r){i.iframe=r,i.uuid=t,o()}).catch(function(r){console.error(r),console.error("Failed to load Tracktor iframe. Using Fallback"),i.initFallback(t).catch(function(u){console.error(u),e(u)})})})},initFallback:function(n){return new Promise(function(t,o){l(h()).then(function(e){i.iframe=e,i.uuid=n,t()}).catch(function(e){console.error(e),o("Failed to load Tracktor fallback")})})},addInputListeners:function(){const n=document.querySelector('input[name="email"]');n&&n.addEventListener("change",function(){d(n.value)&&i.recordEmail(n.value).catch(e=>console.error(e))});const t=document.querySelector('input[name="_phone_number"]'),o=document.querySelector('input[name="phone_number"]');t&&o&&t.addEventListener("change",function(){f(o.value)&&i.recordPhone(o.value).catch(e=>console.error(e))})},recordVisit:function(n,t){let o={uuid:this.uuid,data:n,url:window.location.href};return t&&(o.segments=t),c(this.uuid,"recordVisit",o,this.iframe)},recordEmail:function(n){return c(this.uuid,"recordEmail",{uuid:this.uuid,email:n},this.iframe)},recordPhone:function(n){return c(this.uuid,"recordPhone",{uuid:this.uuid,phone:n},this.iframe)}};async function c(n,t,o,e){if(!e)throw"Cannot record data, need to call initTracktor(src) first";const r={type:t,detail:o};e.contentWindow.postMessage(r,"*")}function s(n){return a(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i,n)}function d(n){return a(/^[^\s@]+@[^\s@]+\.[^\s@]+$/,n)}function f(n){return a(/^\+?\d{8,}$/,n)}function a(n,t){return n.test(t)}function l(n){return new Promise(function(t,o){let e=document.createElement("iframe");e.width="1",e.height="1",e.style.border="0",e.onload=()=>t(e),e.onerror=o,e.src=n,document.body.appendChild(e)})}function m(){const t=window.location.hostname.split("."),o=[".co.uk",".com.au",".co.jp",".co.in",".com.br",".com.mx"];let e=0;for(;e<t.length;){const r="."+t.slice(e).join(".");if(o.includes(r))return t.slice(e-1).join(".");e++}return t.slice(t.length-2).join(".")}function h(){return window.location.protocol+"//tracktor."+m()}window.tracktor=i;export{p as __vite_legacy_guard};
